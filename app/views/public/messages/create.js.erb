<%# メッセージフィールドの入力文字を削除 %>
document.querySelector('#message-body-field').value = '';

<%# メッセージの要素を作成 %>
<% if defined? @message %>
  var messageList = document.querySelector('#message-list');
  var messageItem = document.createElement('li');
  messageItem.innerHTML = '<%= safe_join(@message.body.split("\n"),tag(:br)) %>';
  <% if current_user.id == @message.user.id %>
    messageItem.className = 'current-user-message';
  <% end %>
  messageList.appendChild(messageItem);
<% end %>

<%# フラッシュメッセージをレンダリング %>
document.querySelector('#flash-message').innerHTML = '<%= j(render 'layouts/flash_message') %>';