<%# メッセージフィールドの入力文字を削除 %>
document.querySelector('#message-body-field').value = '';

<%# メッセージの要素を作成 %>
<% @messages.each do |message| %>
  document.querySelector('#message-list').insertAdjacentHTML('beforeend', '<%= j(render 'public/messages/item', message: message) %>');
<% end %>

<% if defined? @message %>
  document.querySelector('#message-list').insertAdjacentHTML('beforeend', '<%= j(render 'public/messages/item', message: @message) %>');
<% end %>

<%# フラッシュメッセージをレンダリング %>
document.querySelector('#flash-message').innerHTML = '<%= j(render 'layouts/flash_message') %>';